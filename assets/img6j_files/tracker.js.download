/**
 * PowerReviews, Copyright 2020
 * HEAD | 73ccb6193 | 11/2/2020
 */
var POWERREVIEWS=function(e){return e.tracker=e.tracker||{},e.tracker.createTracker=function(e,t){var r=window.document,n=r.location,o=null,i=encodeURIComponent||escape,a=decodeURIComponent||unescape,u=Object.prototype.toString,c=10,d="__pr."+parseInt(e.merchantGroupId).toString(36),l="//t.powerreviews.com/t/v1.gif",s=h({event:"e",eventType:"et",userId:"uid",time:"t",locale:"l",merchantGroupId:"mgid",merchantId:"mid",pageId:"pid",siteId:"sid",pageUrl:"p",referrerUrl:"r",orderId:"oid",orderSubtotal:"os",orderNumberOfItems:"on",orderItems:"oi",merchantUserId:"muid",userEmail:"ue",userFirstName:"uf",userLastName:"ul",userFullName:"un",marketingOptIn:"mo",userPhone:"pnb",smsOptIn:"soi"},e.parameterAbbreviations||{}),f="array",m="boolean";function h(){for(var e,r,n={},o=0,i=arguments.length;o<i;o++)for(e in arguments[o])(r=arguments[o][e])!==t&&(n[e]=r);return n}function p(e,t){return function(e){return"object"!=typeof e?typeof e:null===e?"null":u.call(e).match(/\[object\s(\w+)\]/)[1].toLowerCase()}(e)===t}function g(e){return e!==t&&null!==e&&""!==e&&e!==Number.NaN}var v=[";",","];function w(e,t){var r,n=[];if(t=t||0,p(e,f)&&t<v.length){for(r=0;r<e.length;r++)n.push(w(e[r],t+1));return n.join(v[t])}return p(e,m)?e?"y":"n":g(e)?i(e):""}function I(e,t){var r=e;(new Image).src=r+"?"+function(e){var t,r,n=[];for(t in e)g(r=e[t])&&n.push(i(s[t]||t)+"="+w(r));return n.join("&")}(t)}function E(e){for(var t=[],r=0;r<e;r++)t.push((36*Math.random()|0).toString(36));return t.join("")}function b(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,function(){r.call(e)})}function y(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)}function k(e,t,r){for(var n=e;n&&n!==t.parentNode&&9!==n.nodeType;){if(1===n.nodeType&&r(n))return n;n=n.parentNode}return!1}function N(e){if(0===e.offsetWidth||0===e.offsetHeight)return!1;var t,r,n,o,i,a,u,c,d,l,s,f=(t=t||document,docElement=t.documentElement,docBody=t.body,top=window.pageYOffset||Math.max(docElement.scrollTop,docBody.scrollTop),left=window.pageXOffset||Math.max(docElement.scrollLeft,docBody.scrollLeft),width=Math.max(docElement.clientWidth,docBody.clientWidth),height=Math.max(docElement.clientHeight,docBody.clientHeight),{top:top,left:left,bottom:top+height,right:left+width,width:width,height:height}),m=e.getBoundingClientRect(),h={top:m.top+f.top,bottom:m.bottom+f.top,left:m.left+f.left,right:m.right+f.left,width:m.right-m.left,height:m.bottom-m.top},p=(n=h,o=(r=f).left,i=r.top,a=n.left,u=n.top,c=o+r.width,d=i+r.height,l=a+n.width,s=u+n.height,o<a&&(o=a),i<u&&(i=u),c>l&&(c=l),d>s&&(d=s),{top:i,left:o,bottom:d,right:c,height:d-i,width:c-o});return!(p.width*p.height/(h.width*h.height)<.5||!k(document.elementFromPoint((m.left+m.right)/2,(m.top+m.bottom)/2),e,function(t){return t===e}))}var _=[],O=!1;function P(){for(var e=0,t=0;t<_.length;t++)_[t]&&(e++,_[t]()&&(_[t]=!1));0===e&&(clearInterval(O),O=!1,_=[],y(window,"scroll",P),y(window,"resize",P))}function L(e,t){R(e,h({pageUrl:n.href,referrerUrl:r.referrer},t))}function R(t,n){var i,u,s=(i=d,(u=r.cookie.match("(?:^|;)\\s*"+i.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)"))?a(u[1]):null);s||(s="no_cookies");var f={event:t,id:E(c),time:(Date.now&&"number"==typeof Date.now()?Date.now():+new Date).toString(36),userId:s,merchantGroupId:e.merchantGroupId};f=h(f,n),I(e.trackingPixelUrl||l,f),o=n}return{trackEvent:R,trackCheckout:function(e){var t=["page_id","quantity","unit_price"],r=["merchantGroupId","merchantId","locale","userEmail","userFirstName","userLastName","orderId","orderItems"].filter(function(t){if(!e[t])return t});if("boolean"!=typeof e.marketingOptIn)throw new Error("PowerReviews checkout() error - marketingOptIn value provided is not valid");if(r.length>0)throw new Error("PowerReviews checkout() error - "+r.join(", ")+" provided is not valid");var n=function(e){return t.filter(function(t){var r=!isNaN(Number(e[t]))&&e[t];if(!e[t]||"quantity"===t&&!r||"unit_price"===t&&!r)return t})},o=e.orderItems.filter(function(e){return n(e).length>0}).map(function(e,t){return"Order Item #"+(t+1)+" has invalid fields - "+n(e).join(", ")});if(o.length>0)throw new Error("PowerReviews checkout() error - "+o.join(" || "));return L("c",{merchantGroupId:e.merchantGroupId,merchantId:e.merchantId,locale:e.locale,merchantUserId:e.merchantUserId,marketingOptIn:e.marketingOptIn,userEmail:e.userEmail,userPhone:e.userPhone,smsOptIn:e.smsOptIn,userFirstName:e.userFirstName,userLastName:e.userLastName,orderId:e.orderId,orderSubtotal:e.orderItems.reduce(function(e,t){return e+t.unit_price*t.quantity},0),orderNumberOfItems:e.orderItems.reduce(function(e,t){return e+t.quantity},0),orderItems:e.orderItems.map(function(e){return function(e,t,r){for(t in r=[],e)r.hasOwnProperty.call(e,t)&&r.push(t);return r}(t=function(e){return{page_id:e.page_id,page_id_variant:e.page_id_variant,product_name:e.product_name,quantity:e.quantity,unit_price:e.unit_price}}(e)).map(function(e){return t[e]});var t})})},getConfig:function(){var t=h(o,e),r=t.orderItems,n=function(){var e=[],t=r[0];return r.length>0&&r.map(function(r,n){var o=r.slice(-1)[0],i=parseFloat(o);e.push(i),i>e[n-1]&&(t=r)}),t};return h({singleOrderitem:n(),page_id:n()[0],page_id_variant:n()[1]},t)},trackPageview:L,trackClickEvents:function(e,t,r){var n=p(e,f)?e:[e],o="data-pr-event";function i(e){var n=k(function(e){var t=e||window.event,r=!1;return 3==(r=t.target?t.target:t.srcElement?t.srcElement:document).nodeType&&(r=r.parentNode),r}(e),this,function(e){return e&&e.getAttribute(o)});if(n){var i=n.getAttribute(o);L(t,h({eventType:i},r))}}for(var a=0;a<n.length;a++)b(n[a],"click",i)},trackVisibility:function e(t,r,n){if(p(t,f))for(var o=0;o<t.length;o++)e(t[o],r,n);else{var i=function(){return!!N(t)&&(L(r,n),!0)};i()||(_.push(i),O||(O=setInterval(P,1e3),b(window,"scroll",P),b(window,"resize",P)))}},isElementVisible:N}},e}(POWERREVIEWS||{});